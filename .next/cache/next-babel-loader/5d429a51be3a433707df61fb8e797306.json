{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport gql from 'graphql-tag';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nconst CREATE_SCRIPT_TAG = gql`\n    mutation scriptTagCreate($input: ScriptTagInput!){\n        scriptTagCreate(input: $input){\n            scriptTag{\n                id\n            }\n            userErrors{\n                field\n                message\n            }\n        }\n    }\n`;\nconst QUERY_SCRIPT_TAGS = gql`\n    query{\n        scriptTags(first: 5){\n            edges{\n                node{\n                    id\n                    src\n                    displayScope\n                }\n            }\n        }\n    }\n`;\nconst DELETE_SCRIPT_TAG = gql`\n    mutation scriptTagDelete($id: ID!){\n        scriptTagDelete(id: $id){\n            deletedScriptTagId\n            userErrors{\n                field\n                message\n            }\n        }\n    }\n`;\n\nconst ScriptPage = () => {\n  const [createScripts] = useMutation(CREATE_SCRIPT_TAG);\n  const [deleteScripts] = useMutation(DELETE_SCRIPT_TAG);\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(QUERY_SCRIPT_TAGS);\n  if (loading) return /*#__PURE__*/_jsx(\"div\", {\n    children: \"Loading...\"\n  });\n  if (error) return /*#__PURE__*/_jsx(\"div\", {\n    children: error.message\n  });\n  console.log('this is data:', data);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      children: \"These are the script tags right now:\"\n    }), /*#__PURE__*/_jsx(\"button\", {\n      type: \"submit\",\n      onClick: () => {\n        createScripts({\n          variables: {\n            input: {\n              src: \"https://a30dd80893d0.ngrok.io/test-script.js\",\n              displayScope: \"ALL\"\n            }\n          },\n          refetchQueries: [{\n            query: QUERY_SCRIPT_TAGS\n          }]\n        });\n      },\n      children: \"Create Scrip Tag\"\n    }), data.scriptTags.edges.map(item => {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          children: item.node.id\n        }), /*#__PURE__*/_jsx(\"button\", {\n          type: \"submit\",\n          onClick: () => {\n            deleteScripts({\n              variables: {\n                id: item.node.id\n              },\n              refetchQueries: [{\n                query: QUERY_SCRIPT_TAGS\n              }]\n            });\n          },\n          children: \"Delete Script Tag\"\n        })]\n      }, item.node.id);\n    })]\n  });\n};\n\nexport default ScriptPage;","map":{"version":3,"sources":["D:/code/sample-shopify-app/pages/script-page.js"],"names":["gql","useQuery","useMutation","CREATE_SCRIPT_TAG","QUERY_SCRIPT_TAGS","DELETE_SCRIPT_TAG","ScriptPage","createScripts","deleteScripts","loading","error","data","message","console","log","variables","input","src","displayScope","refetchQueries","query","scriptTags","edges","map","item","node","id"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,aAAhB;AACA,SAAQC,QAAR,EAAkBC,WAAlB,QAAoC,qBAApC;AAEA,MAAMC,iBAAiB,GAAGH,GAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAZA;AAcA,MAAMI,iBAAiB,GAAGJ,GAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAZA;AAcA,MAAMK,iBAAiB,GAAGL,GAAI;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAVA;;AAaA,MAAMM,UAAU,GAAG,MAAM;AAErB,QAAK,CAACC,aAAD,IAAkBL,WAAW,CAACC,iBAAD,CAAlC;AACA,QAAK,CAACK,aAAD,IAAkBN,WAAW,CAACG,iBAAD,CAAlC;AACA,QAAM;AAACI,IAAAA,OAAD;AAAUC,IAAAA,KAAV;AAAiBC,IAAAA;AAAjB,MAA0BV,QAAQ,CAACG,iBAAD,CAAxC;AAEA,MAAIK,OAAJ,EAAa,oBAAO;AAAA;AAAA,IAAP;AACb,MAAIC,KAAJ,EAAW,oBAAO;AAAA,cAAMA,KAAK,CAACE;AAAZ,IAAP;AAEXC,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BH,IAA7B;AAEA,sBACI;AAAA,4BACI;AAAA;AAAA,MADJ,eAEI;AACI,MAAA,IAAI,EAAC,QADT;AAEI,MAAA,OAAO,EAAE,MAAM;AACXJ,QAAAA,aAAa,CAAC;AACVQ,UAAAA,SAAS,EAAE;AACPC,YAAAA,KAAK,EAAE;AACHC,cAAAA,GAAG,EAAE,8CADF;AAEHC,cAAAA,YAAY,EAAE;AAFX;AADA,WADD;AAOVC,UAAAA,cAAc,EAAE,CAAC;AAAEC,YAAAA,KAAK,EAAEhB;AAAT,WAAD;AAPN,SAAD,CAAb;AASH,OAZL;AAAA;AAAA,MAFJ,EAiBKO,IAAI,CAACU,UAAL,CAAgBC,KAAhB,CAAsBC,GAAtB,CAA0BC,IAAI,IAAI;AAC/B,0BACI;AAAA,gCACI;AAAA,oBAAIA,IAAI,CAACC,IAAL,CAAUC;AAAd,UADJ,eAEI;AACI,UAAA,IAAI,EAAC,QADT;AAEI,UAAA,OAAO,EAAE,MAAM;AACXlB,YAAAA,aAAa,CAAC;AACVO,cAAAA,SAAS,EAAE;AACPW,gBAAAA,EAAE,EAAEF,IAAI,CAACC,IAAL,CAAUC;AADP,eADD;AAIVP,cAAAA,cAAc,EAAE,CAAC;AAACC,gBAAAA,KAAK,EAAEhB;AAAR,eAAD;AAJN,aAAD,CAAb;AAMH,WATL;AAAA;AAAA,UAFJ;AAAA,SAAUoB,IAAI,CAACC,IAAL,CAAUC,EAApB,CADJ;AAkBH,KAnBA,CAjBL;AAAA,IADJ;AAwCH,CAnDD;;AAqDA,eAAepB,UAAf","sourcesContent":["import gql from 'graphql-tag';\r\nimport {useQuery, useMutation} from '@apollo/react-hooks';\r\n\r\nconst CREATE_SCRIPT_TAG = gql`\r\n    mutation scriptTagCreate($input: ScriptTagInput!){\r\n        scriptTagCreate(input: $input){\r\n            scriptTag{\r\n                id\r\n            }\r\n            userErrors{\r\n                field\r\n                message\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nconst QUERY_SCRIPT_TAGS = gql`\r\n    query{\r\n        scriptTags(first: 5){\r\n            edges{\r\n                node{\r\n                    id\r\n                    src\r\n                    displayScope\r\n                }\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\nconst DELETE_SCRIPT_TAG = gql`\r\n    mutation scriptTagDelete($id: ID!){\r\n        scriptTagDelete(id: $id){\r\n            deletedScriptTagId\r\n            userErrors{\r\n                field\r\n                message\r\n            }\r\n        }\r\n    }\r\n`;\r\n\r\n\r\nconst ScriptPage = () => {\r\n\r\n    const[createScripts] = useMutation(CREATE_SCRIPT_TAG);\r\n    const[deleteScripts] = useMutation(DELETE_SCRIPT_TAG);\r\n    const {loading, error, data } = useQuery(QUERY_SCRIPT_TAGS);\r\n\r\n    if (loading) return <div>Loading...</div>;\r\n    if (error) return <div>{error.message}</div>;\r\n\r\n    console.log('this is data:', data)\r\n\r\n    return (\r\n        <div>\r\n            <h1>These are the script tags right now:</h1>\r\n            <button\r\n                type='submit' \r\n                onClick={() => {\r\n                    createScripts({ \r\n                        variables: {\r\n                            input: {\r\n                                src: \"https://a30dd80893d0.ngrok.io/test-script.js\", \r\n                                displayScope: \"ALL\"\r\n                            }\r\n                        },\r\n                        refetchQueries: [{ query: QUERY_SCRIPT_TAGS}]\r\n                    })\r\n                }}\r\n            >Create Scrip Tag</button>\r\n\r\n            {data.scriptTags.edges.map(item => {\r\n                return(\r\n                    <div key={item.node.id}>\r\n                        <p>{item.node.id}</p>\r\n                        <button \r\n                            type='submit'\r\n                            onClick={() => {\r\n                                deleteScripts({\r\n                                    variables: {\r\n                                        id: item.node.id\r\n                                    },\r\n                                    refetchQueries: [{query: QUERY_SCRIPT_TAGS}]\r\n                                })\r\n                            }}\r\n                        >\r\n                            Delete Script Tag\r\n                        </button>\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ScriptPage;\r\n"]},"metadata":{},"sourceType":"module"}